#!/bin/env bash

function main() {
	for option in "$@"; do
		case "$option" in
			"up") up ;;
			"down") down ;;
			"base") base ;;
			*) echo invalid option && exit 1 ;;
		esac
	done
}

function up() {
	mkdir -p ~/.config ~/.local/bin ~/Desktop ~/Pictures/{wallpapers,screenshots}
	ln -sf $PWD/config/* ~/.config
	ln -sf $PWD/misc/jump/main ~/.local/bin/jump
	for file in $PWD/config/nonxdg/*; do
		[ -f "$file" ] && ln -sf "$file" ~/."$(basename $file)"
	done
	echo done
}

function down() {
	find ~/.config -maxdepth 1 -type l -exec unlink {} \;
	find ~ -maxdepth 1 -type l -exec unlink {} \;
	unlink ~/.local/bin/jump
	echo done
}

function base() {
	if command -v "apt" &>/dev/null ; then
		sudo apt install -y curl fish tmux lf fzf fd-find ripgrep \
			htop bat trash-cli wget fastfetch lazygit sqlite3
		ln -sf $(which batcat) ~/.local/bin/bat
		ln -sf $(which fdfind) ~/.local/bin/fd
	elif command -v "pacman" &>/dev/null ; then
		sudo pacman -Syu --noconfirm curl fish tmux lf fzf fd ripgrep \
			htop bat trash-cli wget fastfetch unzip man-db nvim lazygit
	fi
}

main "$@"
