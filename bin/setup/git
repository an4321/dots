#!/bin/env fish

read -P "name: " name
git config --global user.name "$name"
read -P "email: " email
git config --global user.email "$email"
echo

# generate ssh key pair
if test -z "$(ls -al $HOME/.ssh | grep '.pub')"
	ssh-keygen -t ed25519 -C "$email"
	echo
end

# add ssh key to agent
bash -c "$(ssh-agent -s)"
ssh-add "$HOME/.ssh/id_ed25519"
echo

# the setup
echo "add the public key to github:"
echo "  1. go to github settings"
echo "  2. in the sidebar, click ssh and gpg keys"
echo "  3. click new ssh key or add ssh key"
echo "  4. paste this"
cat "$HOME/.ssh/id_ed25519.pub"
echo
read -n 1 -s -P "press enter when you are ready to test the connection "
ssh -T git@github.com
echo
echo "this is how you can set the remove origin"
echo "git remote set-url origin git@github.com:username/repository.git"
echo
