#!/bin/env fish

set ss "$HOME/Pictures/screenshots/$(date +%F_%H-%M-%S).png"

switch $argv
    case "" "-s"
        if test -n "$WAYLAND_DISPLAY"
			slurp | xargs -r -I {} grim -g {} $ss
		else
            import "$ss"
		end
	case "-f"
		if test -n "$WAYLAND_DISPLAY"
			grim "$ss"
		else
			import -window root "$ss"
		end
end

test -f $ss && notify-send -i "$ss" "screenshot" "$ss"
