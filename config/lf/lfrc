set shell fish
set ratios "1:2"
set scrolloff 10
set ignorecase true
set previewer "~/.config/lf/preview"
set dupfilefmt '%f%n'

map ga cd ~/Desktop
map gd cd ~/Downloads
map gD cd ~/Documents
map gp cd ~/Pictures
map gs cd ~/Pictures/screenshots
map gv cd ~/Videos
map gm cd ~/Music
map gn cd ~/notes
map gc cd ~/dots
map g. cd ~/.config
map gl cd ~/.local

map <c-q> :quit
map J :push 5j
map K :push 5k
map . set hidden!
map x :cut
map X $extract "$f"
map <esc> clear
map <tab> !true
map ; :push $
map o :&xdg-open "$f"
map e $$EDITOR "$f"
map E $sudoedit "$f"
map i $fish
map I :& test -n "$TMUX" && tmux new-window || kitty
map t :& test -n "$TMUX" && tmux new-window -a -n lf 'lf' || kitty -e lf
map <c-a> !t "$PWD"
map a $mk
# v: invert selection

cmd toggle-preview %{{
	if test "$lf_preview" = "true"
		lf -remote "send $id set nopreview"
		lf -remote "send $id set ratios 1"
	else
		lf -remote "send $id set ratios 1:2"
		lf -remote "send $id set preview"
	end
}}
map <c-p> toggle-preview

cmd jump ${{
	set res (jump list | fzf --height=100%)
	lf -remote "send $id cd '$res'"
}}
map z jump

cmd locate ${{
	set res $(fd . | fzf --height=100%)
	lf -remote "send $id select '$res'"
}}
map F locate

cmd trash %{{
	echo " confirm (y/N): " && read res
	test "$res" = "y" && printf "%s\n" $fx | xargs -I {} env trash {}
	test "$res" = "yes" && printf "%s\n" $fx | xargs -I {} env rm -rf {}
	echo
}}
map d trash
map <delete> trash
map D $trash-restore

cmd rn ${{
	read -c (basename $f) -P "rename: " res
	test -z "$res" && echo && return
	mv (basename $f) "$res"
	lf -remote "send $id select '$res'"
}}
map r rn
map R $rn "$PWD"
